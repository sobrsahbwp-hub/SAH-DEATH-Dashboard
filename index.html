<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>District Dropdown</title>

<style>
body{
font-family:Segoe UI, sans-serif;
background:#f4f8fc;
padding:40px;
}

.container{
max-width:400px;
margin:auto;
background:white;
padding:30px;
border-radius:12px;
box-shadow:0 4px 12px rgba(0,0,0,0.08);
}

label{
font-weight:600;
display:block;
margin-bottom:8px;
}

select{
width:100%;
padding:10px;
border-radius:6px;
border:1px solid #ccc;
}
</style>
</head>

<body>

<div class="container">
<label for="district">District</label>
<select id="district">
<option>Loading...</option>
</select>
</div>

<script>

const csvUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQz914IFr1jBOBuiujol-M_LYK9qLBtaHeAsQtqW8xvJqyZxwRee5yRIK6wHj4HrISYzCE5LxucL59C/pub?gid=801410960&single=true&output=csv";

fetch(csvUrl)
.then(response => response.text())
.then(csv => {

    const rows = csv.trim().split("\n").map(row => row.split(","));
    const headers = rows[0].map(h => h.trim());

    // Find index of District column
    const districtIndex = headers.findIndex(h => h.toLowerCase() === "district");

    if (districtIndex === -1) {
        alert("District column not found in sheet.");
        return;
    }

    // Extract district values
    const districts = rows.slice(1)
        .map(row => row[districtIndex]?.trim())
        .filter(value => value && value !== "");

    // Remove duplicates (grouped data)
    const uniqueDistricts = [...new Set(districts)].sort();

    // Fill dropdown
    const select = document.getElementById("district");
    select.innerHTML = "<option>ALL DISTRICTS</option>";

    uniqueDistricts.forEach(district => {
        const option = document.createElement("option");
        option.value = district;
        option.textContent = district;
        select.appendChild(option);
    });

})
.catch(error => {
    console.error("Error fetching data:", error);
});

</script>

</body>
</html>
