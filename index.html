<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>District Dropdown</title>

<style>
body{
    font-family:Segoe UI, sans-serif;
    background:#f4f6f9;
    padding:40px;
}

.container{
    max-width:400px;
    margin:auto;
    background:white;
    padding:30px;
    border-radius:12px;
    box-shadow:0 4px 10px rgba(0,0,0,0.08);
}

label{
    font-weight:600;
    display:block;
    margin-bottom:8px;
}

select{
    width:100%;
    padding:10px;
    border-radius:6px;
    border:1px solid #ccc;
}
</style>
</head>

<body>

<div class="container">
    <label for="district">District</label>
    <select id="district">
        <option>Loading...</option>
    </select>
</div>

<script>

const csvUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQz914IFr1jBOBuiujol-M_LYK9qLBtaHeAsQtqW8xvJqyZxwRee5yRIK6wHj4HrISYzCE5LxucL59C/pub?gid=801410960&single=true&output=csv";

fetch(csvUrl)
.then(response => response.text())
.then(csv => {

    // Proper CSV parsing (handles commas inside quotes)
    const rows = csv.match(/(".*?"|[^",\s]+)(?=\s*,|\s*$)/g);

    const lines = csv.split("\n");

    let columnIndex = 21; // Column V = index 21 (0-based)

    let districts = [];

    lines.slice(1).forEach(line => {
        let values = line.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);
        if(values[columnIndex]){
            let val = values[columnIndex].replace(/"/g,"").trim();
            if(val) districts.push(val);
        }
    });

    // Remove duplicates & sort
    let uniqueDistricts = [...new Set(districts)].sort();

    const select = document.getElementById("district");
    select.innerHTML = "<option value=''>Select District</option>";

    uniqueDistricts.forEach(d => {
        let option = document.createElement("option");
        option.value = d;
        option.textContent = d;
        select.appendChild(option);
    });

})
.catch(error => {
    document.getElementById("district").innerHTML = "<option>Error loading data</option>";
    console.error("Error:", error);
});

</script>

</body>
</html>
